# Maintainer: Ladislav Laska <krakonos@krakonos.org>

pkgname="git-crypt"
pkgver=0.8.0
pkgrel=1
pkgdesc="Transparent file encryption in git"
arch=("i686" "x86_64")
url="https://www.agwa.name/projects/git-crypt/"
msys2_changelog_url='https://www.agwa.name/git/git-crypt.git/raw/master/NEWS.md'
msys2_references=(
  'archlinux: git-crypt'
  'gentoo: dev-vcs/git-crypt'
)
license=("spdx:GPL-3.0-or-later")
source=("https://www.agwa.name/projects/git-crypt/downloads/${pkgname}-${pkgver}.tar.gz")
sha256sums=('540d424f87bed7994a4551a8c24b16e50d3248a5b7c3fd8ceffe94bfd4af0ad9')
makedepends=("openssl-devel" "make" "gcc")
depends=("gnupg" "git" "zlib" "openssl" "gcc-libs")

build () {
  cd "$pkgname-$pkgver"

  CPPFLAGS+=" -D_GNU_SOURCE"
  make
}
package () {
  cd "$pkgname-$pkgver"
  make PREFIX="/usr" DESTDIR="${pkgdir}" install
}
