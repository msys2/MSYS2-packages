From eee7eff3d4011ffe1c40bd5b95d9b66367f7cbdf Mon Sep 17 00:00:00 2001
From: Johannes Schindelin <johannes.schindelin@gmx.de>
Date: Mon, 10 Mar 2025 11:59:44 +0100
Subject: [PATCH] Avoid looking for `SOCKET`

This is not actually used in the MSYS2 build.

Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>
---
 agent/command-ssh.c | 4 ----
 configure.ac        | 3 ---
 2 files changed, 7 deletions(-)

diff --git a/agent/command-ssh.c b/agent/command-ssh.c
index 8e812a6..ce38545 100644
--- a/agent/command-ssh.c
+++ b/agent/command-ssh.c
@@ -3958,11 +3958,7 @@ start_command_handler_ssh (ctrl_t ctrl, gnupg_fd_t sock_client)
   es_syshd_t syshd;
 
   syshd.type = ES_SYSHD_SOCK;
-#ifdef HAVE_SOCKET
-  syshd.u.sock = (SOCKET)sock_client;
-#else
   syshd.u.sock = sock_client;
-#endif
 
   get_client_info (sock_client, &peer_info);
   ctrl->client_pid = peer_info.pid;
diff --git a/configure.ac b/configure.ac
index eb2b437..f38c77d 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1370,9 +1370,6 @@ AC_CHECK_SIZEOF(time_t,,[[
 ]])
 GNUPG_TIME_T_UNSIGNED
 
-# Check SOCKET type for Windows.
-AC_CHECK_TYPES([SOCKET], [], [], [[#include "winsock2.h"]])
-
 if test "$ac_cv_sizeof_unsigned_short" = "0" \
    || test "$ac_cv_sizeof_unsigned_int" = "0" \
    || test "$ac_cv_sizeof_unsigned_long" = "0"; then
-- 
2.49.0.rc1.windows.1

