pkgname=oksh
pkgver=7.5
pkgrel=1
pkgdesc="Portable OpenBSD ksh, based on the Public Domain Korn Shell (pdksh)."
arch=("i686" "x86_64")
url="https://github.com/ibara/oksh"
license=('ISC')
depends=('gcc-libs' 'ncurses')
makedepends=('gcc' 'ncurses-devel')
install=oksh.install
source=("https://github.com/ibara/oksh/releases/download/${pkgname}-${pkgver}/${pkgname}-${pkgver}.tar.gz")
sha256sums=('40b895c3f8e9311bfe2b230e9b3786712550ef488ced33bfd7cd3f89fceeed5d')

prepare() {
  tar xf "${pkgname}-${pkgver}.tar.gz"
}

build() {
  cd "${pkgname}-${pkgver}"
  ./configure --prefix = /usr
  make
}

package() {
  cd "${pkgname}-${pkgver}"

  mkdir -p "${pkgdir}/usr/share/man/man1"

  install -Dm755 oksh.exe "${pkgdir}/usr/bin/oksh.exe"
  install -Dm644 oksh.1 "${pkgdir}/usr/share/man/man1/oksh.1"
}
