# Maintainer: Oleg Titov <oleg.titov@gmail.com>

pkgname=python-brotli
pkgver=1.2.0
pkgrel=1
pkgdesc='Brotli compression library - python library'
arch=('i686' 'x86_64')
license=('MIT')
url='https://github.com/google/brotli'
msys2_repository_url='https://github.com/google/brotli'
msys2_references=(
  "purl: pkg:pypi/brotli"
  "cpe: cpe:/a:google:brotli"
)
depends=('python')
makedepends=(
  'python-devel'
  'gcc'
  "python-setuptools"
  "python-build"
  "python-installer"
)
source=("brotli-${pkgver}.tar.gz::https://github.com/google/brotli/archive/v${pkgver}.tar.gz")
sha256sums=('816c96e8e8f193b40151dad7e8ff37b1221d019dbcb9c35cd3fadbfe6477dfec')

build() {
  cd "${srcdir}"/brotli-${pkgver}

  python -m build --wheel --skip-dependency-check --no-isolation
}

package() {
  cd brotli-${pkgver}

  python -m installer --destdir="${pkgdir}" dist/*.whl
  install -D -m644 "${srcdir}"/brotli-${pkgver}/LICENSE "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
}
