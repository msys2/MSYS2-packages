# Maintainer: Christoph Reiter <reiter.christoph@gmail.com>

pkgname=python-setuptools-rust
pkgver=1.12.0
pkgrel=1
pkgdesc="Compile and distribute Python extensions written in rust as easily as if they were written in C."
arch=('any')
license=('spdx:MIT')
url="https://github.com/PyO3/setuptools-rust"
msys2_references=(
  'archlinux: python-setuptools-rust'
  'purl: pkg:pypi/setuptools-rust'
)
depends=(
  'rust'
  'python-setuptools'
  'python-semantic-version'
)
makedepends=('python-build' 'python-installer' 'python-setuptools-scm')
source=(""https://github.com/PyO3/setuptools-rust/archive/refs/tags/v$pkgver.tar.gz"")
sha256sums=('e6a8f4c4e3c5f0f87b192425572579b7842ea840b1bdda940e751f9d198a3f58')

build() {
  cd "setuptools-rust-$pkgver"

  python -m build --wheel --skip-dependency-check --no-isolation
}

package() {
  cd "setuptools-rust-$pkgver"

  python -m installer --destdir="${pkgdir}" dist/*.whl
  install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}
