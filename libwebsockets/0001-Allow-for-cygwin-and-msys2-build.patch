From 2f5f5226a310a95dbbbe0124acabfe94ddda83fd Mon Sep 17 00:00:00 2001
From: Ben Wijen <ben.wijen.external@cpp.canon>
Date: Wed, 17 Dec 2025 16:02:17 +0100
Subject: [PATCH] Allow for cygwin (and msys2) build

---
 include/libwebsockets.h      | 2 +-
 lib/plat/unix/unix-sockets.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/libwebsockets.h b/include/libwebsockets.h
index 092cbf9e..49d7d8c3 100644
--- a/include/libwebsockets.h
+++ b/include/libwebsockets.h
@@ -48,7 +48,7 @@ extern "C" {
 #if defined(LWS_HAVE_NET_IF_ETHER_H)
 #include <net/if_ether.h>
 #endif
-#if defined(_WIN32) && !defined(ETHER_ADDR_LEN)
+#if defined(_WIN32) || defined(__CYGWIN__) && !defined(ETHER_ADDR_LEN)
 #define ETHER_ADDR_LEN 6
 #endif
 #if defined (__sun)
diff --git a/lib/plat/unix/unix-sockets.c b/lib/plat/unix/unix-sockets.c
index 52d62fb6..e5302c5f 100644
--- a/lib/plat/unix/unix-sockets.c
+++ b/lib/plat/unix/unix-sockets.c
@@ -33,7 +33,7 @@
 
 #include <sys/ioctl.h>
 
-#if !defined(LWS_DETECTED_PLAT_IOS)
+#if !defined(LWS_DETECTED_PLAT_IOS) && !defined(__CYGWIN__)
 #include <net/route.h>
 #endif
 
-- 
2.49.0.windows.1

