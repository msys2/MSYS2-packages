# Maintainer: Alexey Pavlov <alexpux@gmail.com>

_realname=PadWalker
pkgname=perl-${_realname}
pkgver=2.5
pkgrel=1
pkgdesc="PadWalker - play with other peoples' lexical variables"
arch=('i686' 'x86_64')
url="https://metacpan.org/release/PadWalker"
groups=('perl-modules')
license=('GPL')
depends=('perl' 'libxcrypt')
msys2_references=(
  'purl: pkg:cpan/ROBIN/PadWalker'
)
makedepends=('libxcrypt-devel' 'perl-ExtUtils-MakeMaker' 'gcc')
options=('!emptydirs')
source=("https://www.cpan.org/authors/id/R/RO/ROBIN/PadWalker-${pkgver}.tar.gz")
sha256sums=('07b26abb841146af32072a8d68cb90176ffb176fd9268e6f2f7d106f817a0cd0')

build() {
  cd "${_realname}-${pkgver}"
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
  make
}

check() {
  make -C "${_realname}-${pkgver}" test
}

package() {
  cd "${_realname}-${pkgver}"
  make install DESTDIR="${pkgdir}"
}
