# Maintainer: Chris Zheng <chriszheng99@gmail.com>

pkgname=neomutt
pkgver=20251211
pkgrel=2
pkgdesc='a version of mutt with added features'
url='https://neomutt.org/'
msys2_references=(
  'anitya: 10882'
  'archlinux: neomutt'
  'cpe: cpe:2.3:a:neomutt:neomutt'
  'gentoo: mail-client/neomutt'
)
license=('GPL')
arch=('i686' 'x86_64')
depends=('libidn2' 'libgpgme' 'libsasl' 'libgdbm' 'ncurses' 'libiconv' 'libopenssl' 'libintl' 'heimdal-libs')
makedepends=(
  'libgpgme-devel'
  'libsasl-devel'
  'libgdbm-devel'
  'ncurses-devel'
  'libidn2-devel'
  'libiconv-devel'
  'openssl-devel'
  'gettext-devel'
  'heimdal-devel'
  'gcc'
  'libxslt'
  'docbook-xsl'
  'pkgconf'
)
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/neomutt/neomutt/archive/refs/tags/${pkgver}.tar.gz")
sha256sums=('2dcb88c939514e15a55ac24f29dcb23f55754100e74df98558fd5c4b1347e542')

build() {
  cd "${pkgname}-${pkgver}"

  CFLAGS+=" -Wno-incompatible-pointer-types"

  ./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --libexecdir=/usr/lib \
    --gpgme \
    --gss \
    --ssl \
    --sasl \
    --with-ui=ncurses \
    --with-idn2=/usr \
    --idn=0 \
    --idn2=1 \
    --gdbm \

  make
}

package() {
  cd "${pkgname}-${pkgver}"

  make DESTDIR="${pkgdir}" install
}
