pkgname=guile-fibers
pkgver=1.3.1
pkgrel=2
pkgdesc="Concurrent ML-like concurrency for Guile"
url="https://github.com/wingo/fibers"
msys2_references=(
  "aur: guile-fibers"
)
arch=(i686 x86_64)
license=('GPL-3.0')
depends=('guile')
source=("https://github.com/wingo/fibers/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('45697ec7d8a068eac348c700273b2d67f3f317fa5df3896b8981727ba42cf84f')

prepare() {
  cd "${srcdir}/v${pkgver}"
  autoreconf -vif
}

build() {
  cd "${srcdir}/v${pkgver}"
  ./configure \
    --build=${CHOST} \
    --prefix=/usr \
    --disable-rpath
  make
}

package() {
  cd "${srcdir}/v${pkgver}"
  make DESTDIR="${pkgdir}" install
}
